	/* Use this file as an example for how to write test C code
   for testing your APB/AHB modules in simulator */

#include <stdio.h>
#include <string.h>
#include <stdint.h>
#include "c-irq.h"


#define DAC_adr 0x80000A00

uint32_t sine[3*buffSize] = {1804, 2318, 2093, 2204, 2257, 2319, 2457, 2399, 2415, 2436, 2450, 2407, 2459, 2450, 2432, 2411, 2378, 2304, 2291, 2248, 2200, 2140, 2077, 2019, 1957, 1899, 1541, 1798, 1758, 1720, 1691, 1663, 1660, 1650, 1644, 1654, 1674, 1672, 1732, 1769, 1983, 3650, 1862, 1976, 2029, 2207, 2357, 2198, 2251, 2299, 2441, 2378, 2378, 2439, 2458, 2449, 2371, 2462, 2432, 2412, 2536, 2304, 2336, 2248, 2193, 2141, 2140, 2022, 1963, 1864, 1853, 1806, 1806, 1719, 1700, 1606, 1670, 1646, 1646, 1655, 1775, 1674, 1725, 1763, 1805, 1990, 1917, 1851, 2014, 2080, 2313, 2068, 2269, 2295, 2341, 2461, 2377, 2346, 2456, 2461, 2520, 2457, 2377, 2411, 2384, 2183, 2340, 2299, 2201, 2114, 1899, 2085, 2028, 1912, 1864, 1693, 1845, 1769, 1696, 1673, 1655, 1671, 1647, 1650, 1673, 1812, 1690, 1677, 1804, 1852, 303, 1970, 1982, 2084, 2127, 2201, 2185, 2237, 2331, 2373, 2459, 2403, 2438, 2461, 2413, 2436, 2485, 2411, 2383, 2349, 2317, 2193, 2193, 2149, 2092, 2040, 1976, 1930, 1843, 1817, 1661, 1773, 1675, 1673, 1655, 1737, 1644, 1644, 1648, 1712, 1862, 1754, 1754, 1842, 1899, 1934, 1934, 666, 2128, 2183, 2378, 2280, 2284, 2367, 2406, 2462, 2432, 2458, 2460, 2455, 2336, 2426, 2392, 2351, 2313, 2262, 2276, 2281, 2093, 2059, 1806, 1926, 1926, 1827, 1781, 1622, 1750, 1680, 1655, 1649, 1725, 1637, 1651, 1685, 1717, 1883, 1755, 1838, 1890, 1930, 2773, 2005, 2061, 2154, 2226, 2154, 2342, 2313, 2399, 2425, 2441, 2445, 2454, 2454, 2473, 2299, 2420, 2394, 2316, 2265, 2028, 2212, 2160, 2044, 1987, 1769, 1878, 1784, 1750, 1671, 1703, 1634, 1646, 1812, 1651, 1713, 1747, 1852, 1845, 1941, 1980, 292, 2041, 2229, 2274, 2237, 2325, 2425, 2443, 2403, 2460, 2459, 2421, 2406, 2452, 2358, 2318, 2269, 2221, 2165, 2101, 2051, 1999, 1946, 1912, 1829, 1787, 1748, 1699, 1773, 1647, 1652, 1649, 1651, 1647, 1599, 1709, 1749, 1783, 1822, 1822, 1938, 2009, 2052, 1934, 2161, 2194, 2257, 2316, 2360, 2360, 2423, 2443, 2451, 2432, 2486, 2447, 2429, 2411, 2362, 2323, 2248, 2228, 2163, 2247, 2048, 1996, 1943, 1884, 1812, 1597, 1748, 1714, 1683, 1783, 1646, 1655, 1649, 1661, 1612, 1678, 1730, 1779, 1816, 1755, 1883, 1981, 2045, 2100, 2005, 2161, 2267, 2314, 2350, 2406, 2394, 2443, 2455, 2451, 2445, 2452, 2433, 2424, 2385, 2420, 2326, 2227, 2174, 2122, 2212, 2063, 1951, 1892, 1847, 1782, 1754, 1714, 1687, 1665, 1634, 1653, 1664, 1656, 1673};
uint32_t square[3*buffSize] = {2459, 2456, 2457, 2456, 402, 2462, 1589, 1641, 1646, 1647, 1646, 1642, 1642, 1643, 1642, 1642, 1645, 1641, 1641, 1640, 1642, 1642, 1641, 1641, 1645, 1642, 1642, 1647, 2493, 2453, 2456, 2452, 2451, 2453, 2458, 2453, 2458, 2455, 2451, 2456, 2459, 2460, 2459, 2446, 2459, 2455, 2451, 2452, 2455, 2458, 1585, 1642, 1642, 1643, 1643, 1642, 1641, 1642, 1642, 1641, 1642, 1644, 1642, 1642, 1642, 1642, 1642, 1642, 1643, 1642, 1642, 1656, 2392, 2450, 2461, 2449, 2456, 2453, 2451, 2450, 2448, 2451, 2449, 2448, 2460, 2453, 2460, 2454, 2454, 2455, 2456, 2462, 2456, 2441, 1605, 1770, 1643, 1642, 1642, 1642, 1642, 1640, 1642, 1642, 1642, 1643, 1642, 1642, 1642, 1642, 1642, 1643, 1642, 1642, 1576, 1660, 2440, 2451, 2455, 2455, 2450, 2455, 2460, 2458, 2459, 2452, 2454, 2453, 2448, 2459, 2454, 2459, 2456, 2452, 2459, 2457, 2454, 2440, 1838, 1642, 1642, 1643, 1642, 1642, 1642, 1641, 1641, 1641, 1640, 1640, 1641, 1642, 1643, 1643, 1642, 1642, 1642, 1642, 1608, 1658, 3128, 2454, 2456, 2453, 2455, 2454, 2452, 2458, 2459, 2456, 2456, 2458, 2458, 2455, 2456, 2457, 2453, 2458, 2456, 2455, 2456, 2446, 1893, 1642, 1643, 1640, 1642, 1645, 1642, 1637, 1638, 1636, 1638, 1639, 1638, 1642, 1645, 1637, 1640, 1634, 1600, 1638, 1640, 1643, 2013, 2447, 2455, 2461, 2464, 2462, 2441, 2477, 2461, 2455, 2458, 2402, 2451, 2454, 2460, 2463, 2463, 2458, 2455, 2458, 2461, 2460, 2205, 1651, 1641, 1641, 1641, 1645, 1643, 1669, 1609, 1642, 1699, 1642, 1640, 1644, 1646, 1637, 1646, 1644, 1644, 1642, 1644, 1643, 3714, 2438, 2463, 2461, 2435, 2460, 2469, 2481, 2446, 2458, 2435, 2460, 2452, 2450, 2454, 2465, 2449, 2456, 2465, 2456, 3071, 2463, 2330, 1653, 1639, 1641, 1641, 1640, 1642, 1635, 1642, 1641, 1641, 1643, 1642, 1642, 1641, 1640, 1629, 1641, 1640, 1638, 1632, 1640, 1627, 2454, 2455, 2448, 2447, 2459, 2456, 2457, 2453, 2452, 2457, 2457, 2456, 2457, 2452, 2460, 2446, 2456, 2458, 2457, 2461, 2455, 2508, 1643, 1642, 1641, 1641, 1643, 1643, 1641, 1628, 1639, 1642, 1640, 1649, 1636, 1634, 1639, 1634, 1639, 1639, 1637, 1640, 1656, 1661, 2442, 2463, 2458, 2458, 2460, 2457, 2462, 2450, 2459, 2457, 2456, 2459, 2457, 2456, 2447, 2451, 2457, 2458, 2458, 2456, 2455, 2531, 3681, 1643, 1643, 1643, 1642, 1642, 1642, 1642, 1643, 1646, 1642, 1643, 1642, 1641, 1640, 1642, 1642, 1643, 1642, 3759, 1643, 1584, 2472, 2457, 2467};


void dacTest(){
	int i;
	printf("This is DAC test \n");

	/*
	 * output loop
	 * square array is a square
	 * sine array is a sine
	 *
	 * both has 3*128 values avilable, but only 128 is being outputted
	 */


	i = 0;
	while(i < buffSize){
		*(volatile int*)(DAC_adr+(i*4)) = square[i];
		i++;
	}

}

int main(void){

printf("I'm alive! \n");

while(1)
	dacTest();

return 0;

}


